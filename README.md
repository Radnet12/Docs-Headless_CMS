# Что такое Headless CMS?

**Headless CMS *(термин «без головы» здесь подразумевает работу «без frontend’а»)*** – это такая система управления контентом, которая обеспечивает одинаково качественную работу с разными типами интерфейсов (фронтэндами или «головами») вне зависимости от того, на какие экраны или на какие типы платформ они рассчитаны, и сколько их (свойство омниканальности).

Связь разных «голов» и «тела» (бэкенда) обеспечивается за счёт API и микросервисов. При этом сама CMS-система может работать в облаке или на собственном сервере клиента. У каждого подхода свои преимущества и недостатки.

Например, в случае с SaaS-инфраструктурой вы получаете готовый к работе сервис, устойчивый к нагрузкам, но ваши данные хранятся фактически у третьих лиц, а от доступности инфраструктуры провайдера зависит работа ваших сайтов или приложений.

В случае с self-hosted решениями вы получаете полный контроль над содержимым, но вместе с этим теряете преимущества готовой платформы, часто с официальным SLA (соглашением о доступности).

Между классическими CMS и Headless CMS очень тонкая грань. Никто не мешает добавить API к существующей системе и управлять другими frontend’ами. Но Headless CMS изначально проектируются по-другому, поэтому выигрывают по производительности и удобству.

# Какие бывают Headless CMS?

Существует два типа автономных CMS: на основе Git (Git-based) и на основе API (API-driven).

## CMS на основе Git

При использовании **CMS на основе Git** изменения сначала помещаются в ваш репозиторий Git, что затем запускает новую сборку вашего сайта. CMS на основе Git действуют как слой поверх Git и напрямую взаимодействуют с репозиторием Git. По сути, вы работаете с файлами, хранящимися в вашем репозитории Git. Давайте посмотрим на плюсы и минусы этих CMS.

### Плюсы

- Полный контроль версий для всего контента из коробки.
- Все содержимое представлено в виде файлов, поэтому разработчики могут использовать все инструменты, которые они обычно используют.
- Легко откатиться.
- Нет ограничений на пропускную способность или данные.
- Нет привязки к поставщику.
- Простая настройка.

### Минусы

- Если вы хотите использовать несколько приложений или сайтов для извлечения контента с одной и той же CMS, вариант на основе git может быть не лучшим решением.
- Если на вашем сайте много контента, вы не сможете вместо этого заглянуть в базу данных, как в CMS на основе API.
- Если вы планируете быстро менять контент, например новые сообщения каждую минуту, вариант на основе Git - не лучший вариант для вас.
- Ограниченные возможности. Меньший контроль над моделью контента и форматированием.
- Вам нужен отдельный сервис для медиафайлов (ограничения на размер репозитория).

## CMS на основе API

**CMS на основе API** - это автономная CMS, которая обслуживает ваш контент через API, обычно REST API или GraphQL, что позволяет вам полностью отделить ваш контент от его представления. Итак, вы получаете свои данные и то, как они структурированы, но выбор фреймворка и языка для работы с ними зависит от вас.

### Плюсы

- Это лучшее решение, если у вас есть несколько разных приложений или веб-сайтов, которые используют один и тот же управляемый контент.
- Простой в использовании контент с несколькими интерфейсами.
- Большинство доступных опций дают вам возможность полностью настроить CMS по своему вкусу.
- Вы можете легко обрабатывать огромные объемы данных.
- В отличие от решений Git, большинство продуктов на основе API имеют возможность загружать ресурсы и управлять ими.

### Минусы

- Эта версия не контролируется в Git и также не интегрирована в рабочий процесс разработчика в качестве CMS на основе Git. Хотя это скорее разница в архитектуре и подходе, некоторые люди воспринимают это как обратную сторону. 
- Обычно поставляется с ограничениями на использование хранилища и API. Это может быть дорогостоящим, если вы не все хорошо спланируете.
- Зависимость от разработчиков для больших изменений.



# Популярные Headless CMS. Их плюсы и минусы.

## 1. Contentful (API-driven)

**Contentful** - это облачный SaaS-сервис, ориентированный на API, который можно эффективно масштабировать для удовлетворения сложных и разнообразных бизнес-потребностей. Отлично подходит для компаний любого размера с потенциалом значительного роста, потребности которых могут быть как малыми, так и большими.

### Ценообразование

На мой взгляд, самая большая проблема этой CMS - это стоимость масштабирования. Цены на тарифы слишком резкие и не каждый готов платить столько денег. Подойдёт для крупных клиентов, у которых бизнес ориентирован на большую аудиторию.

### Плюсы

- Хорошо написанная документация, руководства и сценарии использования. 8 официальных SDK для разных языков программирования.
- API изображений для изменения / оптимизации изображений.
- Отличный официальный плагин gatsby-source с нативным gatsby-image и поддержкой Contentful Images API.
- Легко установить и настроить многоязычность.
- Если вы не используете Gatsby, но все же хотите воспользоваться преимуществами GraphQL, Contentful предлагает API REST и GraphQL.
- Расширенная настройка веб-перехватчиков (webhooks).

### Минусы

- Contentful дает вам большую свободу с точки зрения структуры и организации компонентов. Это может быть вредно для больших проектов, если вы с самого начала не продумаете это.
- Непростое редактирование многоязычного контента. В случае, если количество языков превышает 3, пользовательский интерфейс начинает выглядеть немного беспорядочно.
- Нет простого способа импортировать большие порции данных - вам нужно написать собственный скрипт, который будет делать это через API.
- Нет простого способа объединить Space Environments - вам нужно написать собственный сценарий в Contentful Migration DSL, протестировать в песочнице и применить к производственной среде. В некоторых случаях проще создать новую среду и скопировать изменения вручную.

## 2. Strapi (API-driven)

**Strapi** - это автономная open-source CMS, построенная на **Node.js и React**. В настоящее время она поддерживает 4 базы данных на выбор: **SQLite, MongoDB, MySQL и PostgreSQL**. Не секрет, что Strapi позиционирует себя как альтернативу WordPress.

Вы можете использовать Strapi для создания всего, что захотите, от простого веб-сайта до большого приложения для электронной коммерции. Вы можете найти множество ресурсов на их веб-сайте, чтобы узнать, как интегрировать Strapi с самыми популярными фреймворками, такими как Gatsby.js, Next.js, Flutter и другими.

### Ценообразование

Лучшее замечание здесь - то, что **Strapi** это открытый источник. В основном вы можете повысить количество ролей пользователей, получить помощь техподдержки и менеджер по работе с клиентами. Также в скором времени Strapi будет предоставлять **облачную версию CMS**.

### Плюсы

- Бесплатная и с открытым исходным кодом, что обеспечивает полный контроль над API.
- Полностью настраиваемая.
- Наличие медиа-библиотеки.
- RESTful или GraphQL API на выбор.
- Есть торговая площадка плагинов, что позволяет расширять функционал админки.
- Поддержка интернационализации.
- Возможность создавать собственные роли и разрешения.

### Минусы

- Вам потребуются базовые знания DevOps, чтобы запустить его в производственной среде. 
- Плохая поддержка миграции или развертывания изменений данных между разными средами.
- Интерфейс администратора не адаптивный.
- Только базовая поддержка полей форматированного текста.

## 3. Ghost (API-driven)

**Ghost** - это полнофункциональная и настраиваемая издательская платформа с открытым исходным кодом. Она создана для команд, которым требуется множество функций, таких как i18n, расширенное управление SEO, управление членством, маркетинг по электронной почте, интеграция сторонних приложений, а также надежный опыт разработки, позволяющий адаптировать свои сайты к их точным потребностям. 

Он был создан как противоядие от медленных и сложных CMS, предоставляя современные функции командам издателей, которым требуется молниеносная, безопасная и полностью настраиваемая платформа для своего контента. Редактор позволяет издателям сосредоточиться исключительно на контенте без громоздких пользовательских интерфейсов и элементов управления. Интерфейс управления отображается только при необходимости, он прост в использовании, но в то же время очень мощный.

### Ценообразование

**Ghost** - это, прежде всего, инструмент публикации с открытым исходным кодом, что означает, что вы можете клонировать репозиторий и бесплатно развернуть экземпляр на своих серверах. Наряду с этим вариантом Ghost предлагает несколько платных планов для управления вашими экземплярами в их собственной инфраструктуре, которые называются Ghost (Pro).

Ghost (Pro) обладает некоторыми дополнительными преимуществами, такими как автоматические еженедельные обновления, обслуживание серверов, резервное копирование, всемирная сеть доставки контента, безопасность корпоративного уровня и поддержка продуктов, начиная от базовой поддержки по электронной почте и заканчивая выделенным менеджером по работе с клиентами.

Короче говоря, Ghost предлагает широкий выбор цен для издателей любого размера, будь то небольшой стартап, стремящийся привлечь аудиторию, или компания из списка Fortune 500 с сотнями тысяч активных клиентов и участников.

### Плюсы

- Молниеносно-быстрая скорость.
- Многофункциональный редактор с упором на контент.
- Встроенное управление подпиской и членством.
- Интегрированные инструменты аналитики и SEO.
- Огромная библиотека расширений, тем, плагинов и интеграций.
- Поставляется с движком шаблонов по умолчанию для интерфейса.

### Минусы

- Дороже других платформ, особенно для случайных блогеров.
- Самостоятельный хостинг действительно возможен только для команд с техническими навыками.
- Нет встроенной функции комментирования.
- Бесплатный открытый исходный код более ограничен, чем версия PaaS.

## 4. Sanity (API-driven)

Проще говоря, **Sanity.io** - это платформа, которая позволяет вам управлять своим контентом. Однако она представляет собой гораздо большее, чем простой инструмент управления контентом. Помимо «классических» функций, таких как управление изображениями или интеграция с другими API, Sanity предлагает гибкость в отношении ваших рабочих процессов и даже того, как выглядит ваша панель управления.

### Ценообразование

Благодаря щедрому уровню бесплатного пользования и ценообразованию с оплатой по мере использования масштабирование с помощью Sanity намного проще, чем с другими платформами. Возможность платить только за потребленные ресурсы поможет предприятиям избежать ненужных сборов.

### Плюсы

- Полностью настраиваемая.
- Поддержка выше среднего.
- Хорошее количество готовых плагинов и расширений.
- Хорошо написанная, понятная документация.
- Гибкая система ценообразования с оплатой по факту использования.
- Растущее сообщество - широкий спектр руководств, плагинов и примеров кода.
- Множество примеров и стартов для начала вашего проекта.

### Минусы

- Требует большего обслуживания, чем другие платформы.
- Разработка требует больше времени по сравнению с другими сервисами.
- Нет готовой поддержки для управления разрешениями пользователей через графический интерфейс.
- Отсутствует более продвинутый инструмент интеграции веб-перехватчиков (webhooks) - интеграция Sanity со сторонними сервисами устроена немного сложнее, чем в других платформах.
- За настраиваемость приходится платить - сравнительно более высокий уровень навыков, чем у других CMS.

## 5. Storyblok (API-driven)

Когда вы открываете веб-сайт **storyblok.com**, вы можете увидеть объявление «Единственная Headless CMS с визуальным редактором».  Именно этим и выделяется эта CMS, но не стоит считать, что она лучше остальных.

### Ценообразование

Адекватные цены на тарифы. Покупать тот или иной тариф стоит по мере необходимости его функций.

### За и против

Визуальный редактор, как ядро Storyblok, имеет свои плюсы и минусы. Для некоторых веб-сайтов это может быть благословением, но для других проектов может вызвать головную боль.

Во-первых, Storyblok - отличный выбор для редакторов. Итак, если ваш веб-сайт и бизнес зависят от частых изменений контента, вам понадобится инструмент, который поможет вам быстро создавать целевые страницы и предварительно просматривать, как веб-сайт / страницы выглядят, прежде чем они будут запущены. Если это так, Storyblok - то, что вам нужно. Однако, если вам нужна CMS для работы в качестве базы данных для вашего веб-сайта, поищите другое решение.

### Плюсы

- Отличный редакторский опыт, предоставляемый визуальным редактором.
- Возможность расширения стандартных типов полей с помощью настраиваемых плагинов.
- Возможность расширить редакционный процесс с помощью приложений.
- Поддержка мультиязычности / интернационализации.
- Возможность копировать / вставлять элементы в редакторе.

### Минусы

- Официальный плагин gatsby-source-storyblok не очень хорошо поддерживается. Официальной поддержки gatsby-image нет.

## 6. Forestry (Git-based)

**Forestry** - это CMS, поддерживаемая Git. Она позволяет легко редактировать все статические сайты на основе плоских файлов и работает со всеми популярными генераторами статических сайтов. Технически это слой поверх Git, который напрямую взаимодействует с файлами в репозитории. Каждое действие, которое происходит в CMS, такое как редактирование, создание и удаление, является действием, выполняемым в рамках рабочего процесса Git.

### Ценообразование

Персональный тариф начинается с 0 долларов в месяц, и это идеальный выбор для небольших проектов. У вас может быть до 3-х веб-сайтов и до 3-х пользователей на 1 веб-сайт. Это дает вам полный доступ к CMS, в отличие от большинства CMS на основе API, нет ограничений в отношении количества или типов контента. Единственные ограничения здесь - это технические ограничения вашего провайдера Git.

Если вам нужен больший контроль над своей организацией или вы хотите управлять более чем 3 веб-сайтами, вам следует взглянуть на план для начинающих. За 29 долларов в месяц у вас есть доступ к учетной записи организации и может быть до 5 веб-сайтов (9 долларов за каждый дополнительный сайт).

### Плюсы

- Очень простая установка и легкая настройка, если вы уже используете плоские файлы в качестве источника контента, например markdown или yml.
- Находясь на вершине Git, вы можете удалить его, и ваш сайт по-прежнему будет работать.
- Нет ограничений по количеству контента или запросов.
- Сервер мгновенного предварительного просмотра.

### Минусы

- Forestry не поддерживает несколько папок мультимедиа. Если в одной папке находится большое количество изображений, это может немного запутаться.

## 7. Netlify CMS (Git-based)

**NetlifyCMS** - это бесплатная система управления контентом с открытым исходным кодом, которую вы можете добавить в любой генератор статических сайтов. Весь контент хранится в файлах, добавленных в ваш репозиторий, рядом с вашей кодовой базой.

Поскольку он действует как оболочка для рабочего процесса Git, вы можете использовать его с GitHub, GitLab или Bitbucket API. Такой подход дает множество преимуществ, таких как:

- **Быстрый веб-интерфейс:** редактирование форматированного текста, предварительный просмотр в реальном времени и загрузка медиафайлов путем перетаскивания.
- **Независимость от платформы:** работает с любыми генераторами статических сайтов.
- **Прямая установка:** добавьте два файла на свой сайт и подключите серверную часть, включив эти файлы в процесс сборки или подключившись к их сети доставки контента (CDN).
- **Простая аутентификация:** использование веб-токенов GitHub, GitLab или Bitbucket и JSON.
- **Гибкие типы контента:** укажите неограниченное количество типов контента с помощью настраиваемых полей.
- **Полностью расширяемый:** создавайте индивидуальные превью, виджеты пользовательского интерфейса и плагины редактора.

**Netlify CMS** может использоваться практически во всем, включая крупные проекты, но всё же лучше всего работает для проектов меньшего размера, то есть с меньшим количеством страниц.

### Ценообразование

Netlify CMS - это **бесплатная** CMS с открытым исходным кодом. Таким образом, вы можете легко управлять своим контентом с помощью удобного пользовательского интерфейса, редактора форматированного текста и предварительного просмотра в реальном времени, неограниченного количества типов контента и, что самое приятное, **вам не нужно за это платить.**

### Плюсы

- Может использоваться с любым генератором статических сайтов.
- Предварительный просмотр в реальном времени.
- Гибкие и неограниченные типы контента с настраиваемыми полями.
- Полностью расширяемый - позволяет создавать пользовательские превью, виджеты пользовательского интерфейса и плагины редактора.
- Большое и заинтересованное сообщество.
- Открытый исходный код.
- Вы можете следить за тем, над какими функциями работает сообщество.

### Минусы

- Иногда бывает трудно следовать документации.
- Нет возможности создавать типы контента через интерфейс - только в файле `config.yml`.
- В некоторых случаях для правильной работы вам потребуется много настроек. Например: для работы gatsby-img или markdown необходимо несколько плагинов и некоторый код.
- Ни отзывчивого интерфейса, ни мобильного приложения.

# Деплой

Для деплоя можно использовать Vercel, Netlify или Heroku. Также можно использовать Cloudflare Workers для кеширования статических сторонних скриптов.

# Источники

- [Про Headless CMS](https://bejamas.io/discovery/headless-cms/)
- [Рейтинг: лучшие CMS](https://uguide.ru/rejting-luchshie-headless-cms#kakuyju-headless-cms-vybrat)
- [Рейтинг CMS  на Jamstack](https://jamstack.org/headless-cms/)
- [Разновидности Headless CMS](https://bejamas.io/blog/git-based-cms-vs-api-first-cms/)
- Статьи про конкретные CMS:
  - [Contentfull](https://bejamas.io/discovery/headless-cms/contentful/)
  - [Strapi](https://bejamas.io/discovery/headless-cms/strapi/)
  - [Ghost](https://bejamas.io/discovery/headless-cms/ghost/)
  - [Sanity](https://bejamas.io/discovery/headless-cms/sanity/)
  - [Storyblock](https://bejamas.io/discovery/headless-cms/storyblok/)
  - [Forestry](https://bejamas.io/discovery/headless-cms/forestry/)
  - [Netlify CMS](https://bejamas.io/discovery/headless-cms/netlifycms/)

